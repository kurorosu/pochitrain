# 1.3.x Changelog

## v1.3.1 (2026-02-06)

### 概要
- 推論ログと計測指標の統一, レポート形式の見直しにより, 推論運用時の可観測性を改善したリリースです.

### Added
- 推論ログとサマリーに入力解像度情報を追加した ([#155](https://github.com/kurorosu/pochitrain/pull/155)).
  - モデルの実入力サイズを実行ログに含め, 実験比較時の前提確認を容易にした.
- ONNX/TensorRT で入力解像度の動的取得を追加した ([#155](https://github.com/kurorosu/pochitrain/pull/155)).
  - バックエンド依存の固定値を減らし, 実モデル定義に基づく表示へ統一した.
- End-to-End 全処理時間計測を追加した ([#150](https://github.com/kurorosu/pochitrain/pull/150)).
  - 推論本体だけでなく I/O と前処理を含む実運用性能を把握できるようにした.
- 推論レポートを日本語 TXT 形式へ統一した ([#156](https://github.com/kurorosu/pochitrain/pull/156)).
  - 日次運用で読みやすいサマリー形式へ寄せ, 結果確認の手間を削減した.

### Changed
- 推論ログの INFO/DEBUG 出力を整理し, バックエンド間の表記を統一した ([#148](https://github.com/kurorosu/pochitrain/pull/148), [#146](https://github.com/kurorosu/pochitrain/pull/146)).
  - 出力粒度を役割別に整理し, デバッグ時のノイズを削減した.
- 推論計測範囲を純粋推論時間と全処理時間で統一した ([#150](https://github.com/kurorosu/pochitrain/pull/150)).
  - 指標定義の差をなくし, バックエンド比較の妥当性を高めた.

### Fixed
- PyTorch/ONNX/TensorRT 各推論で重複ログ出力が発生する問題を解消した ([#158](https://github.com/kurorosu/pochitrain/pull/158)).
  - 同一イベントの多重出力を除去し, 監視ログの可読性を改善した.

### Removed
- プレフィックス付き CSV と不要メタコメントの出力を廃止した ([#156](https://github.com/kurorosu/pochitrain/pull/156)).
  - 出力形式の揺れを減らし, 下流処理の互換性を安定化した.

## v1.3.0 (2026-02-01)

### 概要
- TensorRT 推論導入, 統一推論CLI, 学習コンポーネント分離を進め, 推論機能と設計基盤を拡張したリリースです.

### Added
- cuDNN benchmark 設定と推論ウォームアップ除外を追加した ([#105](https://github.com/kurorosu/pochitrain/pull/105)).
  - 初回実行のウォームアップ影響を除外し, より再現性の高い計測を可能にした.
- TensorRT 推論と統一推論CLIを追加した ([#108](https://github.com/kurorosu/pochitrain/pull/108), [#112](https://github.com/kurorosu/pochitrain/pull/112)).
  - 複数バックエンドを同一CLIで扱えるようにし, 運用コストを下げた.
- クラス別精度レポート出力を PyTorch/ONNX/TensorRT へ追加した ([#118](https://github.com/kurorosu/pochitrain/pull/118)).
  - 全体精度だけでなくクラス単位の偏りを把握できるようにした.
- 型付き設定サブ dataclass を追加した ([#140](https://github.com/kurorosu/pochitrain/pull/140)).
  - 設定値の責務を分離し, 型安全性と検証容易性を高めた.

### Changed
- `PochiTrainer` の構成を再編し, 学習処理の責務を分離した ([#127](https://github.com/kurorosu/pochitrain/pull/127), [#130](https://github.com/kurorosu/pochitrain/pull/130)).
  - 学習ループ本体から周辺責務を抽出し, 可読性と保守性を改善した.
- `PochiPredictor` の設計を見直し, 結果出力や後処理を分離した ([#128](https://github.com/kurorosu/pochitrain/pull/128), [#133](https://github.com/kurorosu/pochitrain/pull/133)).
  - 推論本体と結果整形を分離し, テストと再利用をしやすくした.
- validator, logger, exporter 周辺を共通基盤へ寄せた ([#135](https://github.com/kurorosu/pochitrain/pull/135), [#139](https://github.com/kurorosu/pochitrain/pull/139), [#132](https://github.com/kurorosu/pochitrain/pull/132)).
  - 共通化により重複実装を削減し, 仕様差分の発生を抑えた.

### Fixed
- 空 DataLoader の平均計算ガードを追加した ([#142](https://github.com/kurorosu/pochitrain/pull/142)).
  - データ件数ゼロ時のゼロ除算リスクを防止した.
- 損失平均をサンプル重み付け方式へ変更した ([#143](https://github.com/kurorosu/pochitrain/pull/143)).
  - バッチサイズ変動時でも正しい平均損失を算出できるようにした.

### Removed
- `PochiTrainer` のワークスペース操作ラッパーなど, 重複責務を削除した ([#130](https://github.com/kurorosu/pochitrain/pull/130)).
  - トレーナーの責務過多を緩和し, 変更時の影響範囲を縮小した.
